# Feature Specification: Dopamine Store (Flash Sale System)

**Feature Branch**: `001-dopamine-store`**Created**: 2025-12-08
**Status**: Draft
**Input**: Kafka 기반 선착순 한정 판매 시스템. 매일 오전 10시 10만 명 동시 접속 처리, 공정한 선착순 구매 권한 분배.

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 구매자 회원가입 및 로그인 (Priority: P1)

구매자는 도파민스토어에서 상품을 구매하기 위해 먼저 회원가입을 해야 합니다. 아이디, 비밀번호, 이메일을 입력하여 계정을 생성하고, 이후 로그인하여 인증 토큰을 발급받습니다.

**Why this priority**: 모든 구매 활동의 전제 조건. 인증 없이는 구매 권한 신청 자체가 불가능.

**Independent Test**: 회원가입 후 로그인하여 토큰을 받는 것만으로 독립적 가치 제공 (계정 보유)

**Acceptance Scenarios**:

1. **Given** 미가입 사용자, **When** 아이디/비밀번호/이메일을 입력하여 회원가입 요청, **Then** 계정이 생성되고 회원가입 완료 알림 수신
2. **Given** 가입된 사용자, **When** 올바른 아이디/비밀번호로 로그인, **Then** 인증 토큰이 발급되어 이후 요청에 사용 가능
3. **Given** 가입된 사용자, **When** 이미 존재하는 아이디로 회원가입 시도, **Then** 아이디 중복 오류 메시지 표시
4. **Given** 가입된 사용자, **When** 비밀번호를 분실하여 비밀번호 찾기 요청, **Then** 이메일로 초기화된 비밀번호 획득 (Advanced - 이메일 활용)
5. **Given** 가입된 사용자, **When** 비밀번호를 변경 요청, **Then** 새로운 비밀번호 입력하여 비밀번호 변경 (Advanced)

---

### User Story 2 - 구매자 선착순 구매 권한 획득 (Priority: P1)

구매자는 오전 10시 판매 시작 시 원하는 상품의 구매 권한(PurchaseSlot)을 선착순으로 획득합니다. 재고 수만큼만 구매 권한이 발급되며, 권한 획득에 성공하면 30분 내에 결제를 완료해야 합니다.

**Why this priority**: 시스템의 핵심 가치 제안. "획득의 짜릿함"을 제공하는 핵심 기능.

**Independent Test**: 상품 1개, 재고 1개로 테스트하여 정확히 1명만 구매 권한을 획득하는지 검증

**Acceptance Scenarios**:

1. **Given** 로그인한 구매자, 판매 중인 상품(재고 100개), **When** 10시 정각에 구매 권한 신청, **Then** 선착순 100명 내 진입 시 구매 권한 획득 성공, 초과 시 실패
2. **Given** 구매 권한을 획득한 구매자, **When** 권한 획득 **직후**, **Then** 구매 권한 획득 성공 응답 ~~알림 수신~~
3. **Given** 구매 권한을 획득한 구매자, **When** 30분이 경과, **Then** 구매 권한이 자동 만료되어 회수
4. **Given** 구매 권한이 곧 만료될 구매자, **When** 만료 5분 전, **Then** 만료 예정 알림 수신 (Advanced)
5. **Given** 동일 상품에 대해 이미 구매 권한을 보유한 구매자, **When** 동일 상품 구매 권한 재신청, **Then** 중복 신청 불가 오류 표시
    1. 클라이언트에서 GET /mylist 로 볼 수도 있고.
    2. 서버 쪽에서 관리하는거.
6. **Given** 구매 권한을 신청한 구매자, **When** 권한 신청 직후, **Then** 대기자 숫자 확인 가능 ( Advanced )
7. **Given** 구매 권한을 획득한 구매자, **When** 만료 전에, **Then** 구매 권한 포기 가능 ( Advanced )

---

### User Story 3 - 관리자 상품 등록 및 관리 (Priority: P1)

관리자(Admin)는 판매할 상품을 등록합니다. 상품 등록 시 판매일자와 재고를 필수로 지정하며, 각 상품은 고유한 구매 신청 페이지를 가집니다.

**Why this priority**: 구매 권한 획득의 대상이 되는 상품이 있어야 시스템이 작동함.

**Independent Test**: 상품 1개를 등록하고 상품 상세 페이지에서 정보 확인

**Acceptance Scenarios**:

1. **Given** 관리자 계정, **When** 상품명, 판매일자, 재고를 입력하여 상품 등록, **Then** 상품이 생성되고 해당 재고 수만큼의 구매 권한(PurchaseSlot)이 준비됨
2. **Given** 등록된 상품, **When** 관리자가 상품 정보 수정, **Then** 변경 사항이 반영됨 (단, 판매 시작 후에는 재고 증가만 가능)
    1. 재고 증가 어떻게 할껀데!!
3. **Given** 등록된 상품(판매 전), **When** 관리자가 상품 삭제, **Then** 상품이 삭제됨
4. **Given** 판매가 진행 중인 상품, **When** 관리자가 삭제 시도, **Then** 삭제 불가 오류 표시
5. **Given** 판매가 진행 중인 상품**, When** 관리자가 상품 정보 수정**, Then** 재고 감소 (Advanced) **-**
    1. 구매하는 것처럼 처리한다? 알잘딱.

---

### User Story 4 - 구매자 상품 조회 (Priority: P2)

구매자는 오늘 또는 특정 날짜에 판매 예정인 상품 목록을 조회하고, 개별 상품의 상세 정보를 확인합니다.

**Why this priority**: 구매 권한 획득 전에 상품 정보를 파악해야 함. P1 기능들의 선행 조건이지만 단순 조회이므로 P2.

**Independent Test**: 상품 목록 조회 및 상세 페이지 접근으로 독립적 가치 제공

**Acceptance Scenarios**:

1. **Given** 구매자(로그인 불필요), **When** 오늘 판매 예정 상품 목록 조회, **Then** 오늘 날짜의 상품 목록 표시
2. **Given** 구매자, **When** 특정 상품 상세 페이지 접근, **Then** 상품명, 설명, 판매일자, 잔여 재고(또는 매진 여부) 표시
3. **Given** 구매자, **When** 판매일자가 지난 상품 조회, **Then** 과거 상품은 목록에서 제외되거나 별도 표시
4. **Given** 구매자(로그인 불필요), **When** 오후 N시에 내일 상품 판매 예정 상품 목록 조회, **Then** 내일 날짜의 상품 목록 표시 ( Advanced )
    1. 보통 알림 신청도 가능

---

### User Story 5 - 구매자 보유 구매 권한 조회 (Priority: P2)

구매자는 자신이 획득한 구매 권한 목록을 조회하여 결제 대기 중인 항목, 만료된 항목, 결제 완료된 항목을 확인합니다.

**Why this priority**: 구매 권한 획득 후 결제 진행을 위한 필수 기능.

**Independent Test**: 획득한 구매 권한 목록 조회로 독립적 가치 제공

**Acceptance Scenarios**:

1. **Given** 로그인한 구매자, **When** 내 구매 권한 목록 조회, **Then** 보유 중인 구매 권한 목록 표시 (상태: 결제 대기/만료/결제 완료)
2. **Given** 구매 권한 보유 구매자, **When** 특정 구매 권한 상세 조회, **Then** 해당 상품 정보, 만료 시간, 현재 상태 표시

---

### User Story 6 - 구매자 결제 진행 (Priority: P3 - Advanced)

구매 권한을 보유한 구매자는 30분 이내에 결제를 완료합니다. 결제 완료 시 구매가 확정되며, 결제 결과 알림을 수신합니다.

**Why this priority**: 핵심 비즈니스 흐름의 완성. 구매 권한 획득까지가 MVP이고, 결제는 Advanced 기능.

**Independent Test**: 구매 권한 보유 상태에서 결제 진행하여 구매 확정

**Acceptance Scenarios**:

1. **Given** 유효한 구매 권한 보유 구매자, **When** 결제 요청, **Then** 결제 처리 후 성공 시 구매 확정, 실패 시 오류 표시
2. **Given** 결제 성공한 구매자, **When** 결제 완료 직후, **Then** 결제 완료 알림 및 영수증 수신
3. **Given** 만료된 구매 권한 보유 구매자, **When** 결제 시도, **Then** 구매 권한 만료 오류 표시

---

### Edge Cases

- 10시 정각에 10만 명이 동시에 구매 권한을 신청하면 어떻게 되는가?
    - 시스템은 초당 10만 요청을 처리하고, 선착순으로 재고 수만큼만 권한 부여
- 구매 권한 획득 직후 30분 타이머가 시작되는데, 네트워크 지연으로 사용자가 늦게 알림을 받으면?
    - 서버 기준 시간으로 만료 처리, 사용자에게는 실제 남은 시간 표시
- 동일 사용자가 동일 상품에 중복으로 구매 권한을 신청하면?
    - 시스템에서 중복 신청 방지 (사용자당 상품당 1개 구매 권한 제한)
- 결제 중 구매 권한이 만료되면?
    - ~~결제 시작 시점에 유효성 검증, 만료 시 결제 불가~~
    - 결제 페이지 진입 시 검증, 요청 보낼 시에 검증
- 관리자가 판매 시작 후 재고를 줄이면?
    - ~~이미 발급된 구매 권한에는 영향 없음, 재고 감소는 신규 발급만 제한~~
    - 이미 판매가 시작된 것: 감소 가능, ( 남은 재고와 비교하여 진행 )
    - 판매가 시작되지 않은 것: 감소 가능 ( 기존 재고보다 크면 될 듯 )

## Requirements *(mandatory)*

### Functional Requirements

**사용자/인증 도메인**

- **FR-001**: 시스템은 아이디, 비밀번호, 이메일로 구매자 회원가입을 제공해야 함
- **FR-002**: 시스템은 아이디, 이메일 중복을 허용하지 않아야 함
- **FR-003**: 시스템은 로그인 시 인증 토큰을 발급해야 함
- **FR-004**: 시스템은 비밀번호 초기화 기능을 제공해야 함 (이메일 기반)
- **FR-005**: 시스템은 관리자(Admin) 역할과 구매자(Buyer) 역할을 구분해야 함

**상품 도메인**

- **FR-006**: 관리자는 상품을 등록할 수 있어야 함 (필수: 상품명, 판매일자, 재고)
- **FR-007**: 관리자는 상품 정보를 수정할 수 있어야 함 (판매 시작 후 재고 증가만 가능)
- **FR-008**: 관리자는 판매 시작 전 상품을 삭제할 수 있어야 함
- **FR-009**: 각 상품은 고유한 구매 신청 페이지를 가져야 함
- **FR-010**: 사용자는 판매일자별 상품 목록을 조회할 수 있어야 함
- **FR-011**: 사용자는 상품 상세 정보를 조회할 수 있어야 함

**구매 권한(PurchaseSlot) 도메인**

- **FR-012**: 시스템은 상품 등록 시 재고 수만큼의 구매 권한(PurchaseSlot)을 생성해야 함
- **FR-013**: 구매자는 선착순으로 구매 권한을 획득할 수 있어야 함
- **FR-014**: 시스템은 정확히 재고 수만큼의 구매 권한만 발급해야 함 (초과 발급 금지)
- **FR-015**: 구매 권한은 획득 후 30분간 유효해야 함
- **FR-016**: 시스템은 만료된 구매 권한을 자동으로 회수해야 함
- **FR-017**: 구매자는 자신의 구매 권한 목록을 조회할 수 있어야 함
- **FR-018**: 동일 사용자는 동일 상품에 대해 1개의 구매 권한만 보유할 수 있어야 함

**결제 도메인 (Advanced)**

- **FR-019**: 유효한 구매 권한을 보유한 구매자만 결제를 진행할 수 있어야 함
- **FR-020**: 결제 완료 시 구매 상태가 확정(Confirmed)으로 변경되어야 함
- **FR-021**: 시스템은 결제 상태(대기/성공/실패)를 관리해야 함

**알림 도메인**

- **FR-022**: 시스템은 회원가입 완료 알림을 발송해야 함
- **FR-023**: 시스템은 구매 권한 획득 성공 알림을 발송해야 함
- **FR-024**: 시스템은 구매 권한 만료 5분 전 알림을 발송해야 함 (Advanced)
- **FR-025**: 시스템은 결제 완료 알림을 발송해야 함 (Advanced)
- **FR-026**: 알림은 즉시 전송 또는 예약 전송 방식을 지원해야 함

**성능/안정성 요구사항**

- **FR-027**: 시스템은 10시 정각 동시 접속 10만 명의 요청을 안정적으로 처리해야 함
- **FR-028**: 시스템은 선착순 처리의 공정성을 보장해야 함 (요청 순서 기반)

### Key Entities

- **User**: 시스템 사용자. 역할(구매자/관리자), 아이디, 비밀번호, 이메일 보유
- **Product**: 판매 상품. 상품명, 설명, 판매일자, 재고, 가격 정보 보유
- **PurchaseSlot**: 구매 권한. 특정 상품에 대한 결제 권한으로, 사용자-상품 연결, 만료 시간, 상태(대기/만료/결제완료) 보유
- **Payment**: 결제 정보. 구매 권한에 대한 결제 기록, 결제 상태, 결제 금액 보유 (Advanced)
- **Notification**: 알림 요청. 수신자, 메시지 내용, 전송 방식(즉시/예약), 전송 상태 보유

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 10시 정각에 10만 명이 동시 접속하여 구매 권한을 신청해도 시스템이 정상 작동함 (서버 다운 없음)
- **SC-002**: 재고 100개 상품에 대해 정확히 100명만 구매 권한을 획득함 (101번째 사용자부터는 실패)
- **SC-003**: 구매 권한 신청부터 결과 확인까지 5초 이내에 완료됨
- **SC-004**: 구매 권한 획득 성공률이 선착순 순서와 100% 일치함 (공정성)
- **SC-005**: 사용자는 2분 이내에 회원가입을 완료할 수 있음
- **SC-006**: 구매 권한 만료 시 100% 자동 회수 처리됨
- **SC-007**: 알림 발송 성공률 99% 이상

## Assumptions

- 이메일 인증은 필수가 아닌 선택 사항으로 간주
- 결제 수단은 향후 확장 예정이며, 초기에는 단일 결제 수단 지원
- 관리자 계정은 별도 생성 프로세스를 통해 관리 (일반 회원가입과 분리)
- 한 사용자는 동일 상품에 대해 1개의 구매 권한만 획득 가능
- 구매 권한 만료 시 해당 재고는 자동으로 복구되어 재판매 가능
- 알림 채널은 이메일(Gmail)을 기본으로 하고, 추후 Slack/Discord 등 확장 가능
- 원본
    
    ```markdown
    # Feature Specification: Dopamine Store (Flash Sale System)
    
    **Feature Branch**: `001-dopamine-store`
    **Created**: 2025-12-08
    **Status**: Draft
    **Input**: Kafka 기반 선착순 한정 판매 시스템. 매일 오전 10시 10만 명 동시 접속 처리, 공정한 선착순 구매 권한 분배.
    
    ## User Scenarios & Testing *(mandatory)*
    
    ### User Story 1 - 구매자 회원가입 및 로그인 (Priority: P1)
    
    구매자는 도파민스토어에서 상품을 구매하기 위해 먼저 회원가입을 해야 합니다. 아이디, 비밀번호, 이메일을 입력하여 계정을 생성하고, 이후 로그인하여 인증 토큰을 발급받습니다.
    
    **Why this priority**: 모든 구매 활동의 전제 조건. 인증 없이는 구매 권한 신청 자체가 불가능.
    
    **Independent Test**: 회원가입 후 로그인하여 토큰을 받는 것만으로 독립적 가치 제공 (계정 보유)
    
    **Acceptance Scenarios**:
    
    1. **Given** 미가입 사용자, **When** 아이디/비밀번호/이메일을 입력하여 회원가입 요청, **Then** 계정이 생성되고 회원가입 완료 알림 수신
    2. **Given** 가입된 사용자, **When** 올바른 아이디/비밀번호로 로그인, **Then** 인증 토큰이 발급되어 이후 요청에 사용 가능
    3. **Given** 가입된 사용자, **When** 이미 존재하는 아이디로 회원가입 시도, **Then** 아이디 중복 오류 메시지 표시
    4. **Given** 가입된 사용자, **When** 비밀번호를 분실하여 비밀번호 찾기 요청, **Then** 이메일로 초기화된 비밀번호 획득
    5. **Given** 가입된 사용자, **When** 비밀번호를 변경 요청, **Then** 새로운 비밀번호 입력하여 비밀번호 변경 (Advanced)
    
    ---
    
    ### User Story 2 - 구매자 선착순 구매 권한 획득 (Priority: P1)
    
    구매자는 오전 10시 판매 시작 시 원하는 상품의 구매 권한(PurchaseSlot)을 선착순으로 획득합니다. 재고 수만큼만 구매 권한이 발급되며, 권한 획득에 성공하면 30분 내에 결제를 완료해야 합니다.
    
    **Why this priority**: 시스템의 핵심 가치 제안. "획득의 짜릿함"을 제공하는 핵심 기능.
    
    **Independent Test**: 상품 1개, 재고 1개로 테스트하여 정확히 1명만 구매 권한을 획득하는지 검증
    
    **Acceptance Scenarios**:
    
    1. **Given** 로그인한 구매자, 판매 중인 상품(재고 100개), **When** 10시 정각에 구매 권한 신청, **Then** 선착순 100명 내 진입 시 구매 권한 획득 성공, 초과 시 실패
    2. **Given** 구매 권한을 획득한 구매자, **When** 권한 획득 직후, **Then** 구매 권한 획득 성공 알림 수신
    3. **Given** 구매 권한을 획득한 구매자, **When** 30분이 경과, **Then** 구매 권한이 자동 만료되어 회수
    4. **Given** 구매 권한이 곧 만료될 구매자, **When** 만료 5분 전, **Then** 만료 예정 알림 수신 (Advanced)
    5. **Given** 동일 상품에 대해 이미 구매 권한을 보유한 구매자, **When** 동일 상품 구매 권한 재신청, **Then** 중복 신청 불가 오류 표시 ( Advanced )
    
    ---
    
    ### User Story 3 - 관리자 상품 등록 및 관리 (Priority: P1)
    
    관리자(Admin)는 판매할 상품을 등록합니다. 상품 등록 시 판매일자와 재고를 필수로 지정하며, 각 상품은 고유한 구매 신청 페이지를 가집니다.
    
    **Why this priority**: 구매 권한 획득의 대상이 되는 상품이 있어야 시스템이 작동함.
    
    **Independent Test**: 상품 1개를 등록하고 상품 상세 페이지에서 정보 확인
    
    **Acceptance Scenarios**:
    
    1. **Given** 관리자 계정, **When** 상품명, 판매일자, 재고를 입력하여 상품 등록, **Then** 상품이 생성되고 해당 재고 수만큼의 구매 권한(PurchaseSlot)이 준비됨
    2. **Given** 등록된 상품, **When** 관리자가 상품 정보 수정, **Then** 변경 사항이 반영됨 (단, 판매 시작 후에는 재고 증가만 가능)
    3. **Given** 등록된 상품(판매 전), **When** 관리자가 상품 삭제, **Then** 상품이 삭제됨
    4. **Given** 판매가 진행 중인 상품, **When** 관리자가 삭제 시도, **Then** 삭제 불가 오류 표시
    
    ---
    
    ### User Story 4 - 구매자 상품 조회 (Priority: P2)
    
    구매자는 오늘 또는 특정 날짜에 판매 예정인 상품 목록을 조회하고, 개별 상품의 상세 정보를 확인합니다.
    
    **Why this priority**: 구매 권한 획득 전에 상품 정보를 파악해야 함. P1 기능들의 선행 조건이지만 단순 조회이므로 P2.
    
    **Independent Test**: 상품 목록 조회 및 상세 페이지 접근으로 독립적 가치 제공
    
    **Acceptance Scenarios**:
    
    1. **Given** 구매자(로그인 불필요), **When** 오늘 판매 예정 상품 목록 조회, **Then** 오늘 날짜의 상품 목록 표시
    2. **Given** 구매자, **When** 특정 상품 상세 페이지 접근, **Then** 상품명, 설명, 판매일자, 잔여 재고(또는 매진 여부) 표시
    3. **Given** 구매자, **When** 판매일자가 지난 상품 조회, **Then** 과거 상품은 목록에서 제외되거나 별도 표시
    
    ---
    
    ### User Story 5 - 구매자 보유 구매 권한 조회 (Priority: P2)
    
    구매자는 자신이 획득한 구매 권한 목록을 조회하여 결제 대기 중인 항목, 만료된 항목, 결제 완료된 항목을 확인합니다.
    
    **Why this priority**: 구매 권한 획득 후 결제 진행을 위한 필수 기능.
    
    **Independent Test**: 획득한 구매 권한 목록 조회로 독립적 가치 제공
    
    **Acceptance Scenarios**:
    
    1. **Given** 로그인한 구매자, **When** 내 구매 권한 목록 조회, **Then** 보유 중인 구매 권한 목록 표시 (상태: 결제 대기/만료/결제 완료)
    2. **Given** 구매 권한 보유 구매자, **When** 특정 구매 권한 상세 조회, **Then** 해당 상품 정보, 만료 시간, 현재 상태 표시
    
    ---
    
    ### User Story 6 - 구매자 결제 진행 (Priority: P3 - Advanced)
    
    구매 권한을 보유한 구매자는 30분 이내에 결제를 완료합니다. 결제 완료 시 구매가 확정되며, 결제 결과 알림을 수신합니다.
    
    **Why this priority**: 핵심 비즈니스 흐름의 완성. 구매 권한 획득까지가 MVP이고, 결제는 Advanced 기능.
    
    **Independent Test**: 구매 권한 보유 상태에서 결제 진행하여 구매 확정
    
    **Acceptance Scenarios**:
    
    1. **Given** 유효한 구매 권한 보유 구매자, **When** 결제 요청, **Then** 결제 처리 후 성공 시 구매 확정, 실패 시 오류 표시
    2. **Given** 결제 성공한 구매자, **When** 결제 완료 직후, **Then** 결제 완료 알림 및 영수증 수신
    3. **Given** 만료된 구매 권한 보유 구매자, **When** 결제 시도, **Then** 구매 권한 만료 오류 표시
    
    ---
    
    ### Edge Cases
    
    - 10시 정각에 10만 명이 동시에 구매 권한을 신청하면 어떻게 되는가?
      - 시스템은 초당 10만 요청을 처리하고, 선착순으로 재고 수만큼만 권한 부여
    - 구매 권한 획득 직후 30분 타이머가 시작되는데, 네트워크 지연으로 사용자가 늦게 알림을 받으면?
      - 서버 기준 시간으로 만료 처리, 사용자에게는 실제 남은 시간 표시
    - 동일 사용자가 동일 상품에 중복으로 구매 권한을 신청하면?
      - 시스템에서 중복 신청 방지 (사용자당 상품당 1개 구매 권한 제한)
    - 결제 중 구매 권한이 만료되면?
      - 결제 시작 시점에 유효성 검증, 만료 시 결제 불가
    - 관리자가 판매 시작 후 재고를 줄이면?
      - 이미 발급된 구매 권한에는 영향 없음, 재고 감소는 신규 발급만 제한
    
    ## Requirements *(mandatory)*
    
    ### Functional Requirements
    
    **사용자/인증 도메인**
    - **FR-001**: 시스템은 아이디, 비밀번호, 이메일로 구매자 회원가입을 제공해야 함
    - **FR-002**: 시스템은 아이디 중복을 허용하지 않아야 함
    - **FR-003**: 시스템은 로그인 시 인증 토큰을 발급해야 함
    - **FR-004**: 시스템은 비밀번호 초기화 기능을 제공해야 함 (이메일 기반)
    - **FR-005**: 시스템은 관리자(Admin) 역할과 구매자(Buyer) 역할을 구분해야 함
    
    **상품 도메인**
    - **FR-006**: 관리자는 상품을 등록할 수 있어야 함 (필수: 상품명, 판매일자, 재고)
    - **FR-007**: 관리자는 상품 정보를 수정할 수 있어야 함 (판매 시작 후 재고 증가만 가능)
    - **FR-008**: 관리자는 판매 시작 전 상품을 삭제할 수 있어야 함
    - **FR-009**: 각 상품은 고유한 구매 신청 페이지를 가져야 함
    - **FR-010**: 사용자는 판매일자별 상품 목록을 조회할 수 있어야 함
    - **FR-011**: 사용자는 상품 상세 정보를 조회할 수 있어야 함
    
    **구매 권한(PurchaseSlot) 도메인**
    - **FR-012**: 시스템은 상품 등록 시 재고 수만큼의 구매 권한(PurchaseSlot)을 생성해야 함
    - **FR-013**: 구매자는 선착순으로 구매 권한을 획득할 수 있어야 함
    - **FR-014**: 시스템은 정확히 재고 수만큼의 구매 권한만 발급해야 함 (초과 발급 금지)
    - **FR-015**: 구매 권한은 획득 후 30분간 유효해야 함
    - **FR-016**: 시스템은 만료된 구매 권한을 자동으로 회수해야 함
    - **FR-017**: 구매자는 자신의 구매 권한 목록을 조회할 수 있어야 함
    - **FR-018**: 동일 사용자는 동일 상품에 대해 1개의 구매 권한만 보유할 수 있어야 함
    
    **결제 도메인 (Advanced)**
    - **FR-019**: 유효한 구매 권한을 보유한 구매자만 결제를 진행할 수 있어야 함
    - **FR-020**: 결제 완료 시 구매 상태가 확정(Confirmed)으로 변경되어야 함
    - **FR-021**: 시스템은 결제 상태(대기/성공/실패)를 관리해야 함
    
    **알림 도메인**
    - **FR-022**: 시스템은 회원가입 완료 알림을 발송해야 함
    - **FR-023**: 시스템은 구매 권한 획득 성공 알림을 발송해야 함
    - **FR-024**: 시스템은 구매 권한 만료 5분 전 알림을 발송해야 함 (Advanced)
    - **FR-025**: 시스템은 결제 완료 알림을 발송해야 함 (Advanced)
    - **FR-026**: 알림은 즉시 전송 또는 예약 전송 방식을 지원해야 함
    
    **성능/안정성 요구사항**
    - **FR-027**: 시스템은 10시 정각 동시 접속 10만 명의 요청을 안정적으로 처리해야 함
    - **FR-028**: 시스템은 선착순 처리의 공정성을 보장해야 함 (요청 순서 기반)
    
    ### Key Entities
    
    - **User**: 시스템 사용자. 역할(구매자/관리자), 아이디, 비밀번호, 이메일 보유
    - **Product**: 판매 상품. 상품명, 설명, 판매일자, 재고, 가격 정보 보유
    - **PurchaseSlot**: 구매 권한. 특정 상품에 대한 결제 권한으로, 사용자-상품 연결, 만료 시간, 상태(대기/만료/결제완료) 보유
    - **Payment**: 결제 정보. 구매 권한에 대한 결제 기록, 결제 상태, 결제 금액 보유 (Advanced)
    - **Notification**: 알림 요청. 수신자, 메시지 내용, 전송 방식(즉시/예약), 전송 상태 보유
    
    ## Success Criteria *(mandatory)*
    
    ### Measurable Outcomes
    
    - **SC-001**: 10시 정각에 10만 명이 동시 접속하여 구매 권한을 신청해도 시스템이 정상 작동함 (서버 다운 없음)
    - **SC-002**: 재고 100개 상품에 대해 정확히 100명만 구매 권한을 획득함 (101번째 사용자부터는 실패)
    - **SC-003**: 구매 권한 신청부터 결과 확인까지 5초 이내에 완료됨
    - **SC-004**: 구매 권한 획득 성공률이 선착순 순서와 100% 일치함 (공정성)
    - **SC-005**: 사용자는 2분 이내에 회원가입을 완료할 수 있음
    - **SC-006**: 구매 권한 만료 시 100% 자동 회수 처리됨
    - **SC-007**: 알림 발송 성공률 99% 이상
    
    ## Assumptions
    
    - 이메일 인증은 필수가 아닌 선택 사항으로 간주
    - 결제 수단은 향후 확장 예정이며, 초기에는 단일 결제 수단 지원
    - 관리자 계정은 별도 생성 프로세스를 통해 관리 (일반 회원가입과 분리)
    - 한 사용자는 동일 상품에 대해 1개의 구매 권한만 획득 가능
    - 구매 권한 만료 시 해당 재고는 자동으로 복구되어 재판매 가능
    - 알림 채널은 이메일(Gmail)을 기본으로 하고, 추후 Slack/Discord 등 확장 가능
    ```